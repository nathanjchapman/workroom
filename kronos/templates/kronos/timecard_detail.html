{% extends 'base.html' %}

{% block content %}
    <section>
        <h1>Timecard</h1>
        <h2>{{ timecard.employee.first_name }} {{ timecard.employee.last_name }}</h2>
        <h3>{{ timecard.pay_period_start }} through {{ timecard.pay_period_end }}</h3>
        <p>
            <a class="action-button" href="{% url 'kronos:task_add' timecard.id %}">+ Add new task</a>
        </p>
        {% if tasks %}
            <table class="tasks">
                <thead>
                    <tr class="task">
                        <th>Date</th>
                        <th>Project</th>
                        <th>Description</th>
                        <th>Start time</th>
                        <th>End time</th>
                        <th>LI number</th>
                        <th>L&I class</th>
                    </tr>
                </thead>
                <tbody>
                {% for task in tasks %}
                    <tr class="task">
                        <td>{{ task.date }}</td>
                        <td>{{ task.project }}</td>
                        <td>
                            <a href="{% url 'kronos:task_detail' timecard.id task.id %}">{{ task.description }}</a>
                        </td>
                        <td>{{ task.start_time }}</td>
                        <td>{{ task.end_time }}</td>
                        <td>{{ task.labor_item_number.number }}</td>
                        <td>{{ task.li_class.number }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p><em>You have no tasks</em></p>
        {% endif %}
    </section>
    <section>
        <form method="post" action="{% url 'kronos:timecard_review' timecard.id %}">
            {% csrf_token %}
            <p>
                <label for="submission_notes">Submission notes:</label>
                <br>
                <textarea name="submission_notes" placeholder="Anything you'd like to tell the manager about your timecard?">{{ timecard.submission_notes }}</textarea>
            </p>
            <p>
                <input type="submit" value="Submit for review">
            </p>
        </form>
    </section>
{% endblock %}
